{
    "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
    "name": "HLSL",
    "scopeName": "source.hlsl",
    "patterns": [
        { "include": "#comments" },
        { "include": "#preprocessor" },
        { "include": "#attributes" },
        { "include": "#keywords" },
        { "include": "#types" },
        { "include": "#functions" },
        { "include": "#semantics" },
        { "include": "#numbers" },
        { "include": "#strings" },
        { "include": "#operators" }
    ],
    "repository": {
        "attributes": {
            "patterns": [
                {
                    "name": "meta.attribute.hlsl",
                    "begin": "\\[",
                    "end": "\\]",
                    "patterns": [
                        {
                            "name": "keyword.other.attribute.hlsl",
                            "match": "\\b(numthreads|domain|outputcontrolpoints|outputtopology|partitioning|patchconstantfunc|maxtessfactor|instance|earlydepthstencil|WaveSize|shader)\\b"
                        },
                        {
                            "include": "#numbers"
                        }
                    ]
                }
            ]
        },
        "comments": {
            "patterns": [
                {
                    "name": "comment.block.hlsl",
                    "begin": "/\\*",
                    "end": "\\*/"
                },
                {
                    "name": "comment.line.double-slash.hlsl",
                    "match": "//.*$"
                }
            ]
        },
        "preprocessor": {
            "patterns": [
                {
                    "name": "meta.preprocessor.hlsl",
                    "match": "^\\s*#\\s*(define|undef|if|ifdef|ifndef|else|elif|endif|error|pragma|line|include)\\b",
                    "captures": {
                        "1": { "name": "keyword.control.preprocessor.hlsl" }
                    }
                },
                {
                    "name": "string.quoted.include.hlsl",
                    "match": "#include\\s+[\"<]([^\"'>]+)[\">]",
                    "captures": {
                        "1": { "name": "string.quoted.other.hlsl" }
                    }
                }
            ]
        },
        "keywords": {
            "patterns": [
                {
                    "name": "keyword.control.hlsl",
                    "match": "\\b(if|else|for|while|do|switch|case|default|break|continue|return|discard|clip)\\b"
                },
                {
                    "name": "storage.type.hlsl",
                    "match": "\\b(struct|cbuffer|tbuffer|ConstantBuffer|class|interface|namespace)\\b"
                },
                {
                    "name": "storage.modifier.hlsl",
                    "match": "\\b(const|static|extern|volatile|inline|uniform|shared|groupshared|precise|nointerpolation|noperspective|centroid|sample|linear|point|lineadj|triangleadj|triangle|in|out|inout|row_major|column_major|register|packoffset)\\b"
                },
                {
                    "name": "keyword.other.hlsl",
                    "match": "\\b(true|false|NULL)\\b"
                }
            ]
        },
        "types": {
            "patterns": [
                {
                    "name": "storage.type.basic.hlsl",
                    "match": "\\b(void|bool|int|uint|dword|half|float|double|min16float|min10float|min16int|min12int|min16uint)\\b"
                },
                {
                    "name": "storage.type.vector.hlsl",
                    "match": "\\b(bool[1-4]|int[1-4]|uint[1-4]|half[1-4]|float[1-4]|double[1-4]|min16float[1-4]|min10float[1-4]|min16int[1-4]|min12int[1-4]|min16uint[1-4])\\b"
                },
                {
                    "name": "storage.type.matrix.hlsl",
                    "match": "\\b(bool[1-4]x[1-4]|int[1-4]x[1-4]|uint[1-4]x[1-4]|half[1-4]x[1-4]|float[1-4]x[1-4]|double[1-4]x[1-4]|matrix)\\b"
                },
                {
                    "name": "storage.type.sampler.hlsl",
                    "match": "\\b(sampler|sampler1D|sampler2D|sampler3D|samplerCUBE|sampler_state|SamplerState|SamplerComparisonState)\\b"
                },
                {
                    "name": "storage.type.texture.hlsl",
                    "match": "\\b(texture|Texture1D|Texture1DArray|Texture2D|Texture2DArray|Texture2DMS|Texture2DMSArray|Texture3D|TextureCube|TextureCubeArray)\\b"
                },
                {
                    "name": "storage.type.texture.rw.hlsl",
                    "match": "\\b(RWTexture1D|RWTexture1DArray|RWTexture2D|RWTexture2DArray|RWTexture3D)\\b"
                },
                {
                    "name": "storage.type.buffer.hlsl",
                    "match": "\\b(Buffer|StructuredBuffer|RWStructuredBuffer|ByteAddressBuffer|RWByteAddressBuffer|AppendStructuredBuffer|ConsumeStructuredBuffer|RWBuffer)\\b"
                }
            ]
        },
        "functions": {
            "patterns": [
                {
                    "name": "support.function.hlsl",
                    "match": "\\b(abs|acos|all|AllMemoryBarrier|AllMemoryBarrierWithGroupSync|any|asdouble|asfloat|asin|asint|asuint|atan|atan2|ceil|clamp|clip|cos|cosh|countbits|cross|D3DCOLORtoUBYTE4|ddx|ddx_coarse|ddx_fine|ddy|ddy_coarse|ddy_fine|degrees|determinant|DeviceMemoryBarrier|DeviceMemoryBarrierWithGroupSync|distance|dot|dst|EvaluateAttributeAtCentroid|EvaluateAttributeAtSample|EvaluateAttributeSnapped|exp|exp2|f16tof32|f32tof16|faceforward|firstbithigh|firstbitlow|floor|fma|fmod|frac|frexp|fwidth|GetRenderTargetSampleCount|GetRenderTargetSamplePosition|GroupMemoryBarrier|GroupMemoryBarrierWithGroupSync|InterlockedAdd|InterlockedAnd|InterlockedCompareExchange|InterlockedCompareStore|InterlockedExchange|InterlockedMax|InterlockedMin|InterlockedOr|InterlockedXor|isfinite|isinf|isnan|ldexp|length|lerp|lit|log|log10|log2|mad|max|min|modf|msad4|mul|noise|normalize|pow|printf|Process2DQuadTessFactorsAvg|Process2DQuadTessFactorsMax|Process2DQuadTessFactorsMin|ProcessIsolineTessFactors|ProcessQuadTessFactorsAvg|ProcessQuadTessFactorsMax|ProcessQuadTessFactorsMin|ProcessTriTessFactorsAvg|ProcessTriTessFactorsMax|ProcessTriTessFactorsMin|radians|rcp|reflect|refract|reversebits|round|rsqrt|saturate|sign|sin|sincos|sinh|smoothstep|sqrt|step|tan|tanh|tex1D|tex1Dbias|tex1Dgrad|tex1Dlod|tex1Dproj|tex2D|tex2Dbias|tex2Dgrad|tex2Dlod|tex2Dproj|tex3D|tex3Dbias|tex3Dgrad|tex3Dlod|tex3Dproj|texCUBE|texCUBEbias|texCUBEgrad|texCUBElod|texCUBEproj|transpose|trunc|WaveActiveAllEqual|WaveActiveBitAnd|WaveActiveBitOr|WaveActiveBitXor|WaveActiveCountBits|WaveActiveMax|WaveActiveMin|WaveActiveProduct|WaveActiveSum|WaveGetLaneCount|WaveGetLaneIndex|WaveIsFirstLane|WavePrefixCountBits|WavePrefixProduct|WavePrefixSum|WaveReadLaneAt|WaveReadLaneFirst|QuadReadAcrossDiagonal|QuadReadAcrossX|QuadReadAcrossY|QuadReadLaneAt)\\b"
                },
                {
                    "name": "support.function.unity.hlsl",
                    "match": "\\b(UnityObjectToClipPos|UnityObjectToWorldNormal|UnityObjectToWorldDir|UnityWorldToObjectDir|UnityWorldSpaceLightDir|UnityWorldSpaceViewDir|UNITY_MATRIX_MVP|UNITY_MATRIX_MV|UNITY_MATRIX_V|UNITY_MATRIX_P|UNITY_MATRIX_VP|UNITY_MATRIX_T_MV|UNITY_MATRIX_IT_MV|UNITY_MATRIX_I_V|unity_ObjectToWorld|unity_WorldToObject|TRANSFORM_TEX|UNITY_PROJ_COORD|UNITY_SAMPLE_DEPTH|UNITY_SAMPLE_SHADOW|UNITY_SAMPLE_SHADOW_PROJ|COMPUTE_EYEDEPTH|DECODE_EYEDEPTH|LinearEyeDepth|Linear01Depth|DecodeFloatRGBA|EncodeFloatRGBA|DecodeFloatRG|EncodeFloatRG|DecodeDepthNormal|EncodeDepthNormal|DecodeViewNormalStereo|EncodeViewNormalStereo|SAMPLE_DEPTH_TEXTURE|SAMPLE_DEPTH_TEXTURE_PROJ|SAMPLE_DEPTH_TEXTURE_LOD)\\b"
                }
            ]
        },
        "semantics": {
            "patterns": [
                {
                    "name": "support.variable.semantic.hlsl",
                    "match": "\\b(BINORMAL[0-9]*|BLENDINDICES[0-9]*|BLENDWEIGHT[0-9]*|COLOR[0-9]*|NORMAL[0-9]*|POSITION[0-9]*|POSITIONT|PSIZE[0-9]*|TANGENT[0-9]*|TEXCOORD[0-9]*|FOG|TESSFACTOR[0-9]*|VFACE|VPOS|DEPTH[0-9]*)\\b"
                },
                {
                    "name": "support.variable.semantic.system.hlsl",
                    "match": "\\b(SV_ClipDistance[0-9]*|SV_CullDistance[0-9]*|SV_Coverage|SV_Depth|SV_DepthGreaterEqual|SV_DepthLessEqual|SV_DispatchThreadID|SV_DomainLocation|SV_GroupID|SV_GroupIndex|SV_GroupThreadID|SV_GSInstanceID|SV_InnerCoverage|SV_InsideTessFactor|SV_InstanceID|SV_IsFrontFace|SV_OutputControlPointID|SV_Position|SV_PrimitiveID|SV_RenderTargetArrayIndex|SV_SampleIndex|SV_StencilRef|SV_Target[0-7]?|SV_TessFactor|SV_VertexID|SV_ViewportArrayIndex)\\b"
                }
            ]
        },
        "numbers": {
            "patterns": [
                {
                    "name": "constant.numeric.float.hlsl",
                    "match": "\\b[0-9]*\\.[0-9]+([eE][+-]?[0-9]+)?[fFhHlL]?\\b"
                },
                {
                    "name": "constant.numeric.integer.hexadecimal.hlsl",
                    "match": "\\b0[xX][0-9a-fA-F]+[uUlL]*\\b"
                },
                {
                    "name": "constant.numeric.integer.decimal.hlsl",
                    "match": "\\b[0-9]+[uUlL]*\\b"
                }
            ]
        },
        "strings": {
            "patterns": [
                {
                    "name": "string.quoted.double.hlsl",
                    "begin": "\"",
                    "end": "\"",
                    "patterns": [
                        {
                            "name": "constant.character.escape.hlsl",
                            "match": "\\\\."
                        }
                    ]
                }
            ]
        },
        "operators": {
            "patterns": [
                {
                    "name": "keyword.operator.arithmetic.hlsl",
                    "match": "[+\\-*/%]"
                },
                {
                    "name": "keyword.operator.comparison.hlsl",
                    "match": "[<>]=?|[!=]="
                },
                {
                    "name": "keyword.operator.logical.hlsl",
                    "match": "&&|\\|\\||!"
                },
                {
                    "name": "keyword.operator.bitwise.hlsl",
                    "match": "[&|^~]|<<|>>"
                },
                {
                    "name": "keyword.operator.assignment.hlsl",
                    "match": "[+\\-*/%&|^]?="
                },
                {
                    "name": "keyword.operator.ternary.hlsl",
                    "match": "[?:]"
                }
            ]
        }
    }
}
